## 面试题4．替换空格

> 在go中可以直接使用内置方法Replacer.Replace()进行替换。

题目：请实现一个函数，把字符串中的每个空格替换成"％20"。例如
"We are happy."'则输出"We%20are%20happy." 
**背景**
在网络编程中，如果URL参数中含有特殊字符，如空格、'#'等，可能导致服务器端无法获得正确的参数值。我们需要将这些特殊符号转换成服务器可以识别的字符。转换的规则是在，'%'后面跟上ASCII码的两位十六进制的表示。比如空格的ASCII码是32，即十六进制的0x20，因此空格被替换成"%20"。再比如的ASCII码为35，即十六进制的0x23，它在URL中被替换为"%23"。

**分析**

看到这个题目，首先应该想到的是原来一个空格字符，替换之后变成'%','2','0'这三个字符，因此字符串会变长。

如果在原来的字符串上做替换，那么就有可能覆盖该字符串后面的内存。

如果是创建新的字符串并在新的字符串上做替换，那么可以分配足够的的内存。

时间复杂度为O(n^2)的解法:
最直观的做法是从头到尾扫描字符串，每一次碰到空格字符的时候做替换。由于把1个字符替换成3个字符，必须把空格后面的字符都后移2个字节，否则就有两个字符被覆盖了。

![空格替换](../../剑指offer/images/2.3.png)

时间复杂度为O(n)的解法:
思路：把从前向后替换改为从后向前替换。

先遍历一次字符串，统计出字符串空格的总数，计算出替换之后的字符串的总长度。每替换一个空格，长度增加2，因此替换后字符串长度等于原来的长度加 2*空格数目。以“We are happy.”为例，字符串长度为14(包括结尾符号‘\0’),里面有两个空格，因此替换之后字符串长度是18.

![空格替换](../../剑指offer/images/2.4.png)
**解法**

C语言版

Java版

Go版